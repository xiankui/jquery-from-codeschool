<html>
  <head>
    <title>jQuery Utility Methods</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
    <script src="../jquery-1.9.1.js"></script>

    <!--
      This ajax shim should be included in some other way so the user doesn't see it.
      It's purpose is to stub out the ajax method in jquery to only work with the city
      api calls, which are hardcodeded in the shim
    -->

    <!--
    Change to popular vacation packages (section 3-1 3-2) sites, button refreshes the view
    -->
    <script src="ajax_shim.js"></script>

    <script type="text/javascript">
      $(document).ready(function() {
        $('button').on('click', function() {
          $.ajax({
            url: '/favorites',
            type: 'get',
            success: function(result) {
              $.each(result, function(index, favorite) {
                var el = $('.favorite-' + index);
                el.find('p').html(favorite.name);
                el.find('img')
                  .attr('src', favorite.image);
              });
            }
          });
        });
      });
    </script>
  </head>
  <body class="demo-5">
    <button>Display favorites</button>
    <div class='favorite favorite-0'>
      <h3>Favorite 0</h3>
      <img src=''/>
      <p></p>
    </div>
    <div class='favorite favorite-1'>
      <h3>Favorite 1</h3>
      <img src=''/>
      <p></p>
    </div>
    <div class='favorite favorite-2'>
      <h3>Favorite 2</h3>
      <img src=''/>
      <p></p>
    </div>
  </body>
</html>